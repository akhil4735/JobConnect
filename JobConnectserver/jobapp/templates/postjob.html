{% extends 'base.html' %}

{% block title %}Post a Job{% endblock %}

{% block content %}
<div class="container mt-5">
    <div class="row justify-content-center">
        <div class="col-md-8">
            <div class="card shadow-lg border-0 rounded-4">
                <div class="card-header bg-primary text-white text-center">
                    <h3> Post a Job</h3>
                </div>
                <div class="card-body">
                    <form method="POST" class="needs-validation" novalidate>
                        {% csrf_token %}
                        
                        <div class="mb-3">
                            <label for="title" class="form-label">Job Title:</label>
                            <input type="text" name="title" class="form-control" placeholder="Enter job title" required>
                            <div class="invalid-feedback">Please enter a job title.</div>
                        </div>
                        <div class="mb-3">
                            <label for="company" class="form-label">Company Name</label>
                            <input type="text" name="company" class="form-control" placeholder="Enter company name" required>
                            <div class="invalid-feedback">Please enter a company name.</div>
                        </div>

                        <div class="mb-3">
                            <label for="description" class="form-label">Job Description:</label>
                            <textarea name="description" class="form-control" rows="4" placeholder="Describe the job role" required></textarea>
                            <div class="invalid-feedback">Please provide a job description.</div>
                        </div>

                        <div class="mb-3">
                            <label for="location" class="form-label">Location:</label>
                            <div class="input-group">
                                <input type="text" name="location" id="location" class="form-control" placeholder="Start typing to search for a location..." required>
                                <button class="btn btn-outline-secondary" type="button" id="clearLocation">
                                    <i class="bi bi-x-circle"></i>
                                </button>
                            </div>
                            <div class="form-text">
                                <i class="bi bi-info-circle"></i> 
                                Type to search for verified locations. This ensures correct spelling and location accuracy.
                            </div>
                            <div class="invalid-feedback">Please select a valid location.</div>
                        </div>

                        <div class="row">
                            <div class="col-md-6 mb-3">
                                <label for="salary" class="form-label">Salary (Optional):</label>
                                <input type="number" name="salary" class="form-control" placeholder="Enter salary in INR">
                            </div>

                            <div class="col-md-6 mb-3">
                                <label for="category" class="form-label">Category:</label>
                                <input type="text" name="category" class="form-control" placeholder="e.g. IT, Finance">
                            </div>
                        </div>

                        <div class="mb-3">
                            <label for="job_type" class="form-label">Job Type:</label>
                            <select name="job_type" class="form-select">
                                <option value="Full-Time">Full-Time</option>
                                <option value="Part-Time">Part-Time</option>
                                <option value="Freelance">Freelance</option>
                                <option value="Internship">Internship</option>
                            </select>
                        </div>

                        <div class="d-grid">
                            <button type="submit" class="btn btn-primary btn-lg">
                                <i class="bi bi-send"></i> Post Job
                            </button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
    // Enhanced Location Input with Suggestions
    document.addEventListener('DOMContentLoaded', function() {
        const locationInput = document.getElementById('location');
        const clearButton = document.getElementById('clearLocation');
        
        // Common Indian cities and locations for suggestions
        const commonLocations = [
            'Mumbai, Maharashtra',
            'Delhi, Delhi',
            'Bangalore, Karnataka',
            'Hyderabad, Telangana',
            'Chennai, Tamil Nadu',
            'Kolkata, West Bengal',
            'Pune, Maharashtra',
            'Ahmedabad, Gujarat',
            'Jaipur, Rajasthan',
            'Surat, Gujarat',
            'Lucknow, Uttar Pradesh',
            'Kanpur, Uttar Pradesh',
            'Nagpur, Maharashtra',
            'Indore, Madhya Pradesh',
            'Thane, Maharashtra',
            'Bhopal, Madhya Pradesh',
            'Visakhapatnam, Andhra Pradesh',
            'Pimpri-Chinchwad, Maharashtra',
            'Patna, Bihar',
            'Vadodara, Gujarat',
            'Ghaziabad, Uttar Pradesh',
            'Ludhiana, Punjab',
            'Agra, Uttar Pradesh',
            'Nashik, Maharashtra',
            'Faridabad, Haryana',
            'Meerut, Uttar Pradesh',
            'Rajkot, Gujarat',
            'Kalyan-Dombivali, Maharashtra',
            'Vasai-Virar, Maharashtra',
            'Varanasi, Uttar Pradesh',
            'Srinagar, Jammu and Kashmir',
            'Aurangabad, Maharashtra',
            'Dhanbad, Jharkhand',
            'Amritsar, Punjab',
            'Allahabad, Uttar Pradesh',
            'Ranchi, Jharkhand',
            'Howrah, West Bengal',
            'Coimbatore, Tamil Nadu',
            'Jabalpur, Madhya Pradesh',
            'Gwalior, Madhya Pradesh',
            'Vijayawada, Andhra Pradesh',
            'Jodhpur, Rajasthan',
            'Madurai, Tamil Nadu',
            'Raipur, Chhattisgarh',
            'Kota, Rajasthan',
            'Guwahati, Assam',
            'Chandigarh, Chandigarh',
            'Solapur, Maharashtra',
            'Hubli-Dharwad, Karnataka',
            'Bareilly, Uttar Pradesh',
            'Moradabad, Uttar Pradesh',
            'Mysore, Karnataka',
            'Gurgaon, Haryana',
            'Aligarh, Uttar Pradesh',
            'Jalandhar, Punjab',
            'Tiruchirappalli, Tamil Nadu',
            'Bhubaneswar, Odisha',
            'Salem, Tamil Nadu',
            'Warangal, Telangana',
            'Guntur, Andhra Pradesh',
            'Bhiwandi, Maharashtra',
            'Saharanpur, Uttar Pradesh',
            'Gorakhpur, Uttar Pradesh',
            'Bikaner, Rajasthan',
            'Amravati, Maharashtra',
            'Noida, Uttar Pradesh',
            'Jamshedpur, Jharkhand',
            'Bhilai, Chhattisgarh',
            'Cuttack, Odisha',
            'Firozabad, Uttar Pradesh',
            'Kochi, Kerala',
            'Nellore, Andhra Pradesh',
            'Bhavnagar, Gujarat',
            'Dehradun, Uttarakhand',
            'Durgapur, West Bengal',
            'Asansol, West Bengal',
            'Rourkela, Odisha',
            'Nanded, Maharashtra',
            'Kolhapur, Maharashtra',
            'Ajmer, Rajasthan',
            'Akola, Maharashtra',
            'Gulbarga, Karnataka',
            'Jamnagar, Gujarat',
            'Ujjain, Madhya Pradesh',
            'Loni, Uttar Pradesh',
            'Siliguri, West Bengal',
            'Jhansi, Uttar Pradesh',
            'Ulhasnagar, Maharashtra',
            'Jammu, Jammu and Kashmir',
            'Sangli-Miraj & Kupwad, Maharashtra',
            'Mangalore, Karnataka',
            'Erode, Tamil Nadu',
            'Belgaum, Karnataka',
            'Ambattur, Tamil Nadu',
            'Tirunelveli, Tamil Nadu',
            'Malegaon, Maharashtra',
            'Gaya, Bihar',
            'Jalgaon, Maharashtra',
            'Udaipur, Rajasthan',
            'Maheshtala, West Bengal',
            'Tirupur, Tamil Nadu',
            'Davanagere, Karnataka',
            'Kozhikode, Kerala',
            'Akbarpur, Uttar Pradesh',
            'Kurnool, Andhra Pradesh',
            'Bokaro Steel City, Jharkhand',
            'Rajpur Sonarpur, West Bengal',
            'South Dumdum, West Bengal',
            'Bellary, Karnataka',
            'Patiala, Punjab',
            'Gopalpur, West Bengal',
            'Agartala, Tripura',
            'Bhagalpur, Bihar',
            'Muzaffarnagar, Uttar Pradesh',
            'Bhatpara, West Bengal',
            'Panihati, West Bengal',
            'Latur, Maharashtra',
            'Dhule, Maharashtra',
            'Rohtak, Haryana',
            'Korba, Chhattisgarh',
            'Bhilwara, Rajasthan',
            'Berhampur, Odisha',
            'Muzaffarpur, Bihar',
            'Ahmednagar, Maharashtra',
            'Mathura, Uttar Pradesh',
            'Kollam, Kerala',
            'Avadi, Tamil Nadu',
            'Kadapa, Andhra Pradesh',
            'Kamarhati, West Bengal',
            'Bilaspur, Chhattisgarh',
            'Shahjahanpur, Uttar Pradesh',
            'Satara, Maharashtra',
            'Bijapur, Karnataka',
            'Rampur, Uttar Pradesh',
            'Shivamogga, Karnataka',
            'Chandrapur, Maharashtra',
            'Junagadh, Gujarat',
            'Thrissur, Kerala',
            'Alwar, Rajasthan',
            'Bardhaman, West Bengal',
            'Kulti, West Bengal',
            'Kakinada, Andhra Pradesh',
            'Nizamabad, Telangana',
            'Parbhani, Maharashtra',
            'Tumkur, Karnataka',
            'Hisar, Haryana',
            'Ozhukarai, Puducherry',
            'Bihar Sharif, Bihar',
            'Panipat, Haryana',
            'Darbhanga, Bihar',
            'Bally, West Bengal',
            'Aizawl, Mizoram',
            'Dewas, Madhya Pradesh',
            'Ichalkaranji, Maharashtra',
            'Karnal, Haryana',
            'Bathinda, Punjab',
            'Jalna, Maharashtra',
            'Barasat, West Bengal',
            'Kirari Suleman Nagar, Delhi',
            'Purnia, Bihar',
            'Satna, Madhya Pradesh',
            'Mau, Uttar Pradesh',
            'Sonipat, Haryana',
            'Farrukhabad, Uttar Pradesh',
            'Sagar, Madhya Pradesh',
            'Rourkela, Odisha',
            'Durg, Chhattisgarh',
            'Imphal, Manipur',
            'Ratlam, Madhya Pradesh',
            'Hapur, Uttar Pradesh',
            'Anantapur, Andhra Pradesh',
            'Arrah, Bihar',
            'Karimnagar, Telangana',
            'Etawah, Uttar Pradesh',
            'Ambernath, Maharashtra',
            'North Dumdum, West Bengal',
            'Bharatpur, Rajasthan',
            'Begusarai, Bihar',
            'New Delhi, Delhi',
            'Gandhidham, Gujarat',
            'Baranagar, West Bengal',
            'Tiruvottiyur, Tamil Nadu',
            'Puducherry, Puducherry',
            'Sikar, Rajasthan',
            'Thoothukkudi, Tamil Nadu',
            'Rewa, Madhya Pradesh',
            'Mirzapur, Uttar Pradesh',
            'Raichur, Karnataka',
            'Pali, Rajasthan',
            'Ramagundam, Telangana',
            'Haridwar, Uttarakhand',
            'Vijayanagaram, Andhra Pradesh',
            'Katihar, Bihar',
            'Nagercoil, Tamil Nadu',
            'Sri Ganganagar, Rajasthan',
            'Karawal Nagar, Delhi',
            'Mango, Jharkhand',
            'Thanjavur, Tamil Nadu',
            'Bulandshahr, Uttar Pradesh',
            'Uluberia, West Bengal',
            'Murwara, Madhya Pradesh',
            'Sambhal, Uttar Pradesh',
            'Singrauli, Madhya Pradesh',
            'Nadiad, Gujarat',
            'Secunderabad, Telangana',
            'Naihati, West Bengal',
            'Yamunanagar, Haryana',
            'Bidhan Nagar, West Bengal',
            'Pallavaram, Tamil Nadu',
            'Bidar, Karnataka',
            'Munger, Bihar',
            'Panchkula, Haryana',
            'Burhanpur, Madhya Pradesh',
            'Raurkela Industrial Township, Odisha',
            'Kharagpur, West Bengal',
            'Dindigul, Tamil Nadu',
            'Gandhinagar, Gujarat',
            'Hospet, Karnataka',
            'Nangloi Jat, Delhi',
            'Malda, West Bengal',
            'Ongole, Andhra Pradesh',
            'Deoghar, Jharkhand',
            'Chapra, Bihar',
            'Haldia, West Bengal',
            'Khandwa, Madhya Pradesh',
            'Nandyal, Andhra Pradesh',
            'Morena, Madhya Pradesh',
            'Amroha, Uttar Pradesh',
            'Anand, Gujarat',
            'Bhind, Madhya Pradesh',
            'Bhalswa Jahangir Pur, Delhi',
            'Madhyamgram, West Bengal',
            'Bhiwani, Haryana',
            'Berhampore, West Bengal',
            'Ambala, Haryana',
            'Mori Gate, Delhi',
            'Saharsa, Bihar',
            'Damoh, Madhya Pradesh',
            'Satara, Maharashtra',
            'Loni, Uttar Pradesh',
            'Barasat, West Bengal',
            'Jehanabad, Bihar',
            'Phagwara, Punjab',
            'Adityapur, Jharkhand',
            'Alappuzha, Kerala',
            'Bahadurgarh, Haryana',
            'Machilipatnam, Andhra Pradesh',
            'Rae Bareli, Uttar Pradesh',
            'Jalpaiguri, West Bengal',
            'Bharuch, Gujarat',
            'Pathankot, Punjab',
            'Hoshiarpur, Punjab',
            'Barmer, Rajasthan',
            'Adoni, Andhra Pradesh',
            'Jind, Haryana',
            'Tonk, Rajasthan',
            'Tenali, Andhra Pradesh',
            'Kancheepuram, Tamil Nadu',
            'Vapi, Gujarat',
            'Sirsa, Haryana',
            'Navsari, Gujarat',
            'Mahbubnagar, Telangana',
            'Bettiah, Bihar',
            'Suryapet, Telangana',
            'Sahibganj, Jharkhand',
            'Parli, Maharashtra',
            'Hajipur, Bihar',
            'Gangtok, Sikkim',
            'Kohima, Nagaland',
            'Shillong, Meghalaya',
            'Aizawl, Mizoram',
            'Imphal, Manipur',
            'Agartala, Tripura',
            'Itanagar, Arunachal Pradesh',
            'Dispur, Assam',
            'Kohima, Nagaland',
            'Shillong, Meghalaya',
            'Aizawl, Mizoram',
            'Imphal, Manipur',
            'Agartala, Tripura',
            'Itanagar, Arunachal Pradesh',
            'Dispur, Assam'
        ];

        // Create datalist for suggestions
        const datalist = document.createElement('datalist');
        datalist.id = 'locationSuggestions';
        commonLocations.forEach(location => {
            const option = document.createElement('option');
            option.value = location;
            datalist.appendChild(option);
        });
        locationInput.parentNode.appendChild(datalist);
        locationInput.setAttribute('list', 'locationSuggestions');

        // Clear location button
        clearButton.addEventListener('click', function() {
            locationInput.value = '';
            locationInput.classList.remove('is-valid', 'is-invalid');
            locationInput.focus();
        });

        // Handle input changes
        locationInput.addEventListener('input', function() {
            if (this.value.length > 0) {
                this.classList.remove('is-invalid');
                // Check if the entered value matches a suggestion
                if (commonLocations.some(loc => loc.toLowerCase().includes(this.value.toLowerCase()))) {
                    this.classList.add('is-valid');
                }
            }
        });

        // Handle form submission validation
        locationInput.addEventListener('blur', function() {
            if (this.value.length > 0 && !commonLocations.some(loc => loc.toLowerCase().includes(this.value.toLowerCase()))) {
                this.classList.add('is-invalid');
                this.classList.remove('is-valid');
            }
        });
    });

    // Bootstrap Form Validation
    (function () {
        'use strict'
        var forms = document.querySelectorAll('.needs-validation')
        Array.prototype.slice.call(forms).forEach(function (form) {
            form.addEventListener('submit', function (event) {
                if (!form.checkValidity()) {
                    event.preventDefault()
                    event.stopPropagation()
                }
                form.classList.add('was-validated')
            }, false)
        })
    })();
</script>

<style>
    .pac-container {
        z-index: 1051 !important;
    }
    
    .input-group .btn {
        border-left: none;
    }
    
    .input-group .form-control:focus {
        border-right: none;
        box-shadow: none;
    }
    
    .input-group .form-control:focus + .btn {
        border-color: #86b7fe;
        box-shadow: 0 0 0 0.25rem rgba(13, 110, 253, 0.25);
    }
</style>
{% endblock %}
